!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("@ecomplus/client"),require("@ecomplus/utils"),require("core-js/modules/es.array.iterator"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.string.iterator"),require("core-js/modules/web.dom-collections.iterator"),require("core-js/modules/es.symbol"),require("core-js/modules/es.symbol.description"),require("core-js/modules/es.symbol.iterator"),require("core-js/modules/es.function.name"),require("core-js/modules/es.array.from"),require("core-js/modules/es.array.slice"),require("core-js/modules/es.regexp.to-string"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.string.replace"),require("core-js/modules/es.promise"),require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.map"),require("core-js/modules/es.string.split"),require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.find"),require("core-js/modules/web.dom-collections.for-each")):"function"==typeof define&&define.amd?define(["@ecomplus/client","@ecomplus/utils","core-js/modules/es.array.iterator","core-js/modules/es.object.to-string","core-js/modules/es.string.iterator","core-js/modules/web.dom-collections.iterator","core-js/modules/es.symbol","core-js/modules/es.symbol.description","core-js/modules/es.symbol.iterator","core-js/modules/es.function.name","core-js/modules/es.array.from","core-js/modules/es.array.slice","core-js/modules/es.regexp.to-string","core-js/modules/es.regexp.exec","core-js/modules/es.string.replace","core-js/modules/es.promise","core-js/modules/es.array.for-each","core-js/modules/es.array.map","core-js/modules/es.string.split","core-js/modules/es.array.concat","core-js/modules/es.array.find","core-js/modules/web.dom-collections.for-each"],r):"object"==typeof exports?exports.EcomRouter=r(require("@ecomplus/client"),require("@ecomplus/utils"),require("core-js/modules/es.array.iterator"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.string.iterator"),require("core-js/modules/web.dom-collections.iterator"),require("core-js/modules/es.symbol"),require("core-js/modules/es.symbol.description"),require("core-js/modules/es.symbol.iterator"),require("core-js/modules/es.function.name"),require("core-js/modules/es.array.from"),require("core-js/modules/es.array.slice"),require("core-js/modules/es.regexp.to-string"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.string.replace"),require("core-js/modules/es.promise"),require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.map"),require("core-js/modules/es.string.split"),require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.find"),require("core-js/modules/web.dom-collections.for-each")):e.EcomRouter=r(e["@ecomplus/client"],e["@ecomplus/utils"],e["core-js/modules/es.array.iterator"],e["core-js/modules/es.object.to-string"],e["core-js/modules/es.string.iterator"],e["core-js/modules/web.dom-collections.iterator"],e["core-js/modules/es.symbol"],e["core-js/modules/es.symbol.description"],e["core-js/modules/es.symbol.iterator"],e["core-js/modules/es.function.name"],e["core-js/modules/es.array.from"],e["core-js/modules/es.array.slice"],e["core-js/modules/es.regexp.to-string"],e["core-js/modules/es.regexp.exec"],e["core-js/modules/es.string.replace"],e["core-js/modules/es.promise"],e["core-js/modules/es.array.for-each"],e["core-js/modules/es.array.map"],e["core-js/modules/es.string.split"],e["core-js/modules/es.array.concat"],e["core-js/modules/es.array.find"],e["core-js/modules/web.dom-collections.for-each"])}(this,(function(e,r,o,t,s,n,u,i,c,a,l,f,m,d,p,y,j,b,g,h,v,x){return function(e){var r={};function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=r,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)o.d(t,s,function(r){return e[r]}.bind(null,s));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="",o(o.s=22)}([function(r,o){r.exports=e},function(e,o){e.exports=r},function(e,r){e.exports=o},function(e,r){e.exports=t},function(e,r){e.exports=s},function(e,r){e.exports=n},function(e,r){e.exports=u},function(e,r){e.exports=i},function(e,r){e.exports=c},function(e,r){e.exports=a},function(e,r){e.exports=l},function(e,r){e.exports=f},function(e,r){e.exports=m},function(e,r){e.exports=d},function(e,r){e.exports=p},function(e,r){e.exports=y},function(e,r){e.exports=j},function(e,r){e.exports=b},function(e,r){e.exports=g},function(e,r){e.exports=h},function(e,r){e.exports=v},function(e,r){e.exports=x},function(e,r,o){"use strict";o.r(r);o(6),o(7),o(8),o(2),o(17),o(3),o(4),o(5);var t=o(1),s=(o(10),o(11),o(9),o(13),o(12),o(14),o(18),o(0));function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],t=!0,s=!1,n=void 0;try{for(var u,i=e[Symbol.iterator]();!(t=(u=i.next()).done)&&(o.push(u.value),!r||o.length!==r);t=!0);}catch(e){s=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(s)throw n}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return u(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=e[o];return t}var i=function(e,r){var o=n(r,1)[0];o||(o=e.location.pathname);var t="string"==typeof o?o.slice(1):null,u="/"+e.storeId+"@"+t.replace(/\//g,"$")+".json";return Object(s.storefront)({url:u}).then((function(e){var r=e.data.GET;if(r){var t=n(r.split("@"),2),s=t[0],u=t[1];if(u)return{path:o,resource:s,_id:u}}var i=new Error("Resource not found, invalid slug or store ID");throw i.response=e,i}))};o(19),o(15);function c(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],t=!0,s=!1,n=void 0;try{for(var u,i=e[Symbol.iterator]();!(t=(u=i.next()).done)&&(o.push(u.value),!r||o.length!==r);t=!0);}catch(e){s=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(s)throw n}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=e[o];return t}var l=function(e,r){var o=c(r,1)[0];return new Promise((function(r,t){var n=e.storeId,u=o.resource,i=o._id;if(u&&i)Object(s.store)({url:"/".concat(u,"/").concat(i,".json"),storeId:n}).then((function(e){var o=e.data;r({resource:u,body:o})})).catch(t);else{var c=new Error("Invalid route resource or object ID");c.response={},t(c)}}))},f=(o(20),o(16),o(21),function(e){return new Promise((function(r,o){var t=e.storeId,n=[],u=[];["products","categories","collections","brands"].forEach((function(e){n.push(Object(s.store)({url:"/".concat(e,".json"),storeId:t}).then((function(r){var o=r.data.result;Array.isArray(o)&&o.forEach((function(r){var o=r._id,t=r.slug,s=r.name,n=r.sku;if(t){var i="/"+t;u.find((function(e){return e.path===i}))||u.push({resource:e,_id:o,path:i,name:s,sku:n})}}))})))})),Promise.all(n).then((function(){return r(u)})).catch(o)}))});function m(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],t=!0,s=!1,n=void 0;try{for(var u,i=e[Symbol.iterator]();!(t=(u=i.next()).done)&&(o.push(u.value),!r||o.length!==r);t=!0);}catch(e){s=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(s)throw n}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return d(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return d(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=e[o];return t}var p=function(e,r){var o=m(r,2),n=o[0],u=o[1],i=void 0===u||u;n||(n=e.location.hostname);var c="/domains/"+n+".json";return Object(s.platform)({url:c}).then((function(r){var o=r.data;if(i){["store_id","store_object_id","channel_id"].forEach((function(e){return t._config.set(e,o[e])}));var s=o.default_lang;s&&(t._config.set("lang",s),t._config.set("country_code",s.replace(/^[a-z]{2}_/,"").toUpperCase()),"pt_br"===s&&(t._config.set("currency","BRL"),t._config.set("currency_symbol","R$")))}return e.storeId=o.store_id,o}))};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.default=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"object"===("undefined"==typeof window?"undefined":y(window))&&window.location,o=this;this.storeId=e||t.$ecomConfig.get("store_id"),this.location=r,this.map=function(){return i(o,arguments)},this.resolve=function(){return l(o,arguments)},this.list=function(){return f(o)},this.setupStore=function(){return p(o,arguments)}}}]).default}));
//# sourceMappingURL=ecom-router.min.js.map